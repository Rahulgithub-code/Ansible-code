- hosts: all
  tasks:
  - copy:
      src: /software/hadoop-1.2.1-1.x86_64.rpm 
      dest: /
  - copy: 
      src: /software/jdk-8u171-linux-x64.rpm
      dest: /
#  - command: "rpm -ivh jdk-8u171-linux-x64.rpm"
#  - command: "rpm -ivh hadoop-1.2.1-1.x86_64.rpm --force"
  - file: 
      path: /nn
      state: directory

  - name: Editing hdfs file
    blockinfile: 
      path: /etc/hadoop/hdfs-site.xml
      insertafter: "<configuration>" 
      content: |
        <property>
        <name>dfs.name.dir</name>
        <value>/nn</value>
        </property>

  - name: Editing core file
    blockinfile: 
      path: /etc/hadoop/core-site.xml
      insertafter: "<configuration>" 
      content: |
        <property>
        <name>fs.default.name</name>
        <value>hdfs://0.0.0.0:9001</value>
        </property>
  - command: "hdfs namenode -format"
  - command: "hadoop-daemon.sh start namenode"
  
